<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.3 - Our Solution - The Gym Environment Wrapper" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">1.3 - Our Solution - The Gym Environment Wrapper | BurnySc2/Python-Sc2 Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://MaxsimGol.github.io/learn-python-sc2/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://MaxsimGol.github.io/learn-python-sc2/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://MaxsimGol.github.io/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.3 - Our Solution - The Gym Environment Wrapper"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="1.3 - Our Solution - The Gym Environment Wrapper | BurnySc2/Python-Sc2 Documentation"><meta data-rh="true" name="description" content="To resolve the async vs. sync conflict, we will architect a solution using a well-established software design pattern: an Adapter. We will create a custom Python class that acts as a bridge, presenting a standard, synchronous gymnasium interface to the RL agent, while internally managing the complex, asynchronous python-sc2 game process."><meta data-rh="true" property="og:description" content="To resolve the async vs. sync conflict, we will architect a solution using a well-established software design pattern: an Adapter. We will create a custom Python class that acts as a bridge, presenting a standard, synchronous gymnasium interface to the RL agent, while internally managing the complex, asynchronous python-sc2 game process."><link data-rh="true" rel="icon" href="/learn-python-sc2/img/favicon.png"><link data-rh="true" rel="canonical" href="https://MaxsimGol.github.io/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.3 - Our Solution - The Gym Environment Wrapper"><link data-rh="true" rel="alternate" href="https://MaxsimGol.github.io/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.3 - Our Solution - The Gym Environment Wrapper" hreflang="en"><link data-rh="true" rel="alternate" href="https://MaxsimGol.github.io/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.3 - Our Solution - The Gym Environment Wrapper" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"1.3 - Our Solution - The Gym Environment Wrapper","item":"https://MaxsimGol.github.io/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.3 - Our Solution - The Gym Environment Wrapper"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YY6E18FRKL"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-YY6E18FRKL",{anonymize_ip:!0})</script>



<meta name="google-site-verification" content="Ssfb9WLX16jSFbtw7JFWgG15TJY8nHTLIGt57oR9_uk"><link rel="stylesheet" href="/learn-python-sc2/assets/css/styles.254622d3.css">
<script src="/learn-python-sc2/assets/js/runtime~main.272c45a0.js" defer="defer"></script>
<script src="/learn-python-sc2/assets/js/main.307506ff.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/learn-python-sc2/"><b class="navbar__title text--truncate">Home page</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/learn-python-sc2/docs/Part 1 - Getting Started/Chapter 1 - Introduction/1.1 - What is python-sc2">Tutorial</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/MaxsimGol/learn-python-sc2" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/learn-python-sc2/docs/Part 1 - Getting Started/Chapter 1 - Introduction/1.1 - What is python-sc2">Part 1 - Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/learn-python-sc2/docs/Part 2 - Core Concepts/Chapter 3 - The BotAI Class/3.1 - The Heart of Your Bot">Part 2 - Core Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/learn-python-sc2/docs/Part 3 - Advanced Development/Chapter 6 - Building a Smarter Bot/6.1 - Macro-management - Expanding and Managing Your Economy">Part 3 - Advanced Development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/learn-python-sc2/docs/Part 4 - The Wider World/Chapter 8 - Bot Vision - Advantages and Limitations/8.1 - What Your Bot Sees That a Human Can&#x27;t - API Advantages">Part 4 - The Wider World</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.1 - What is RL for SC2">Part 5 - Reinforcement Learning</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.1 - What is RL for SC2">Foundations of Reinforcement Learning</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.1 - What is RL for SC2">Chapter 1 - Introduction to RL Concepts</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.1 - What is RL for SC2">1.1 - What is RL for SC2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.2 - The Core Challenge - async vs sync">1.2 - The Core Challenge - async vs sync</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.3 - Our Solution - The Gym Environment Wrapper">1.3 - Our Solution - The Gym Environment Wrapper</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 2 - Setting Up the RL Environment/2.1 - Installing RL Libraries">Chapter 2 - Setting Up the RL Environment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 3 - The Worker Bot/3.1 - Goal - Learning a Single Economic Task">Chapter 3 - The Worker Bot</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 4 - The Macro Bot/4.1 - Goal - Learning an Economic Trade-off">Chapter 4 - The Macro Bot</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 5 - The Micro Bot/5.1 - Goal - Learning a Combat Skill - Kiting">Chapter 5 - The Micro Bot</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 6 - Training Your Agents/6.1 - Code - The Reusable train.py Script">Chapter 6 - Training Your Agents</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Advanced RL and Next Steps/Chapter 7 - Visualizing and Evaluating Training/7.1 - Setting up TensorBoard">Advanced RL and Next Steps</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/learn-python-sc2/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Part 5 - Reinforcement Learning</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Foundations of Reinforcement Learning</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Chapter 1 - Introduction to RL Concepts</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">1.3 - Our Solution - The Gym Environment Wrapper</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>1.3 - Our Solution - The Gym Environment Wrapper</h1></header><p>To resolve the <code>async</code> vs. <code>sync</code> conflict, we will architect a solution using a well-established software design pattern: an <strong>Adapter</strong>. We will create a custom Python class that acts as a bridge, presenting a standard, synchronous <code>gymnasium</code> interface to the RL agent, while internally managing the complex, asynchronous <code>python-sc2</code> game process.</p>
<p>This wrapper is the cornerstone of our entire RL implementation.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-gymnasiumenv-api-contract"><strong>The <code>gymnasium.Env</code> API Contract</strong><a href="#the-gymnasiumenv-api-contract" class="hash-link" aria-label="Direct link to the-gymnasiumenv-api-contract" title="Direct link to the-gymnasiumenv-api-contract">​</a></h4>
<p><code>stable-baselines3</code> requires its environments to adhere to the <code>gymnasium.Env</code> API. Our wrapper must implement this contract precisely.</p>
<table><thead><tr><th style="text-align:left">Method Signature</th><th style="text-align:left">Role in Our Wrapper</th></tr></thead><tbody><tr><td style="text-align:left"><code>__init__(self, ...)</code></td><td style="text-align:left">Defines the <code>action_space</code> and <code>observation_space</code>. Creates the communication queues.</td></tr><tr><td style="text-align:left"><code>reset(self)</code></td><td style="text-align:left"><strong>Episode Start.</strong> Terminates any old game process, launches a new one, waits for the initial observation, and returns it.</td></tr><tr><td style="text-align:left"><code>step(self, action)</code></td><td style="text-align:left"><strong>Core Interaction.</strong> Takes an <code>action</code> from the agent, puts it on the action queue, waits for the game to process it, retrieves the result from the observation queue, and returns it.</td></tr><tr><td style="text-align:left"><code>close(self)</code></td><td style="text-align:left"><strong>Cleanup.</strong> Ensures the <code>python-sc2</code> game process is properly terminated when training finishes.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-implementation-plan"><strong>The Implementation Plan</strong><a href="#the-implementation-plan" class="hash-link" aria-label="Direct link to the-implementation-plan" title="Direct link to the-implementation-plan">​</a></h4>
<p>Our <code>SC2GymEnv</code> wrapper will be responsible for orchestrating the two processes. Our <code>BotAI</code> subclass will also need to be modified to listen for commands.</p>
<ul>
<li>
<p><strong><code>SC2GymEnv</code> (The Wrapper - Process 1):</strong></p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <!-- -->Inherit from <code>gymnasium.Env</code>.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <!-- -->Initialize <code>multiprocessing.Queue</code> for actions and observations.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <!-- -->Implement <code>reset</code> to manage the game process lifecycle.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <!-- -->Implement <code>step</code> to pass data between queues.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <!-- -->Implement <code>close</code> for clean shutdown.</li>
</ul>
</li>
<li>
<p><strong><code>RLBotAI</code> (The Game Actor - Process 2):</strong></p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <!-- -->Be initialized with the communication queues.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <!-- -->In <code>on_step</code>, get an <code>action</code> from the action queue (blocking).</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <!-- -->Execute the action in the game world.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <!-- -->Calculate the <code>observation</code> and <code>reward</code>.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <!-- -->Put the <code>(obs, reward, terminated, ...)</code> tuple on the observation queue.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="system-architecture-diagram"><strong>System Architecture Diagram</strong><a href="#system-architecture-diagram" class="hash-link" aria-label="Direct link to system-architecture-diagram" title="Direct link to system-architecture-diagram">​</a></h4>
<p>This diagram illustrates the complete, two-process architecture with our <code>SC2GymEnv</code> wrapper as the bridge.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">            +--------------------------+      +---------------------------+      +---------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            |   stable-baselines3      |      |     SC2GymEnv Wrapper     |      |    python-sc2 Game Proc.  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            |     (Training Loop)      |      |      (Our Adapter)        |      |      (Our RLBotAI)        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            +--------------------------+      +---------------------------+      +---------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |                               |                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           | calls env.step(action)        |                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |------------------------------&gt;| action_q.put(action)             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |                               |---------------------------------&gt;| action = action_q.get()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |                               |                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |                               |                                  | ...plays game step...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |                               |                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |                               |                                  | new_obs, ... = ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |                               |                                  | obs_q.put(new_obs, ...)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |                               | obs, ... = obs_q.get() &lt;---------|------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |                               |                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           | returns (obs, reward, ...)    |                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |&lt;------------------------------|                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           |                               |                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Synchronous Process 1            Inter-Process Queues               Asynchronous Process 2</span><br></span></code></pre></div></div>
<p>With this design, the RL agent operates within its standard synchronous loop, completely abstracted from the asynchronous nature of the game it is learning to control. In the next chapter, we will implement this <code>SC2GymEnv</code> class.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 1 - Introduction to RL Concepts/1.2 - The Core Challenge - async vs sync"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">1.2 - The Core Challenge - async vs sync</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/learn-python-sc2/docs/Part 5 - Reinforcement Learning/Foundations of Reinforcement Learning/Chapter 2 - Setting Up the RL Environment/2.1 - Installing RL Libraries"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">2.1 - Installing RL Libraries</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/BurnySc2/python-sc2" target="_blank" rel="noopener noreferrer" class="footer__link-item">BurnySc2/python-sc2<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/zXHU4wM" target="_blank" rel="noopener noreferrer" class="footer__link-item">SC2 AI Arena Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/watch?v=HlLK5BA0wT0&amp;list=PLQVvvaa0QuDcBby2qVDsDv41GghEQfr5E&amp;ab_channel=sentdex" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sentdex YouTube guide<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>